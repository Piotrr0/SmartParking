<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.text.Text?>
<?import javafx.scene.shape.Circle?>
<?import javafx.scene.image.ImageView?>

<BorderPane xmlns:fx="http://javafx.com/fxml"
            fx:controller="com.smartparking.frontend.ProfileController"
            prefWidth="900" prefHeight="600"
            style="-fx-background-color: #f8f9fa;">

    <top>
        <HBox spacing="20" style="-fx-background-color: white; -fx-padding: 15; -fx-effect: dropshadow(three-pass-box, rgba(0,0,0,0.1), 0, 0, 0, 2);">
            <Button text="â† Back" onAction="#handleBack" styleClass="btn, btn-secondary"/>
            <Text text="My Profile" style="-fx-font-size: 20px; -fx-font-weight: bold; -fx-fill: #343a40;"/>
        </HBox>
    </top>

    <center>
        <ScrollPane fitToWidth="true" style="-fx-background-color: transparent;">
            <VBox alignment="TOP_CENTER" spacing="30" style="-fx-padding: 40;">

                <VBox maxWidth="500" spacing="20" style="-fx-background-color: white; -fx-padding: 30; -fx-background-radius: 15; -fx-effect: dropshadow(three-pass-box, rgba(0,0,0,0.1), 0, 5, 15, 0);">

                    <VBox alignment="CENTER" spacing="10">
                        <StackPane>
                            <Circle fx:id="avatarCircle" radius="60" fill="#e9ecef" stroke="#dee2e6" strokeWidth="2"/>
                            <Text fx:id="defaultIcon" text="ðŸ‘¤" style="-fx-font-size: 60px; -fx-fill: #adb5bd;"/>
                        </StackPane>
                        <Button text="Change Photo" onAction="#handleChangePhoto" styleClass="btn, btn-sm, btn-outline-primary"/>
                    </VBox>

                    <Separator/>

                    <GridPane vgap="15" hgap="20">
                        <columnConstraints>
                            <ColumnConstraints minWidth="100" prefWidth="120"/>
                            <ColumnConstraints hgrow="ALWAYS"/>
                        </columnConstraints>

                        <Label text="Username:" GridPane.rowIndex="0" GridPane.columnIndex="0" style="-fx-font-weight: bold; -fx-text-fill: #495057;"/>
                        <Label fx:id="usernameLabel" text="..." GridPane.rowIndex="0" GridPane.columnIndex="1" style="-fx-font-size: 14px;"/>

                        <Label text="Email:" GridPane.rowIndex="1" GridPane.columnIndex="0" style="-fx-font-weight: bold; -fx-text-fill: #495057;"/>
                        <Label fx:id="emailLabel" text="..." GridPane.rowIndex="1" GridPane.columnIndex="1" style="-fx-font-size: 14px;"/>
                    </GridPane>

                    <Separator/>

                    <VBox spacing="10">
                        <Label text="Change Password" style="-fx-font-size: 16px; -fx-font-weight: bold;"/>
                        <PasswordField fx:id="newPasswordField" promptText="New Password"/>
                        <Button text="Update Password" onAction="#handleChangePassword" styleClass="btn, btn-primary" maxWidth="Infinity"/>
                    </VBox>

                </VBox>

                <VBox maxWidth="500" spacing="15" style="-fx-border-color: #dc3545; -fx-border-width: 1; -fx-border-radius: 10; -fx-padding: 20; -fx-background-color: #fff5f5; -fx-background-radius: 10;">
                    <Label text="Danger Zone" style="-fx-text-fill: #dc3545; -fx-font-weight: bold; -fx-font-size: 14px;"/>
                    <Text text="Once you delete your account, there is no going back. Please be certain." wrappingWidth="450" style="-fx-fill: #6c757d;"/>
                    <Button text="Delete Account" onAction="#handleDeleteAccount" style="-fx-background-color: #dc3545; -fx-text-fill: white; -fx-cursor: hand;" maxWidth="Infinity"/>
                </VBox>

            </VBox>
        </ScrollPane>
    </center>
</BorderPane>